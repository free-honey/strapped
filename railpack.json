{
  "$schema": "https://schema.railpack.com",
  "steps": {
    "install_forc": {
      "commands": [
        "set -euo pipefail", 
        "export PATH=${HOME}/.fuelup/bin:${PATH}", 
        "if ! command -v fuelup >/dev/null 2>&1; then curl -sSf https://install.fuel.network | sh; fi",
        "fuelup toolchain install latest",
        "fuelup default latest"
      ]
    },
    "build": {
      "inputs": [{ "step": "install_forc" }],
      "commands": [
        "cargo xtask abi"
      ]
    }
  },
  "deploy": {
    "startCommand": "cargo run -p indexer -- --graphql-url ${GRAPHQL_URL} --port ${PORT} --test --tracing"
  }
}
